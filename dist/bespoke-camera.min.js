/*! bespoke-camera v0.1.0 Â© 2014 Matteo Collina, Licensed MIT */
bespoke.plugins.camera=function(a,b){function c(){var a=function(a){console.log("Reeeejected!",a)};navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;var b={video:{mandatory:{minWidth:1280,minFrameRate:30}},audio:!1};navigator.getUserMedia(b,function(a){i.src=window.URL.createObjectURL(a),i.play(),i.controls=!1,i.onloadedmetadata=function(){}},a)}function d(){j||(j=!0,i.style.width="100%")}function e(){j&&(j=!1,i.style.width=b.width)}function f(){j?e():d()}function g(){i.style.opacity="1",i.style.transition="opacity 0.5s linear",i.style.visibility="visible"}function h(){i.style.opacity="0",i.style.transition="visibility 0s 0.25s, opacity 0.25s linear",i.style.visibility="hidden"}var i=document.createElement("video"),j=!1;b=b||{},b.width=b.width||"640px",i.style.width=b.width,i.style.position="fixed",i.style.top="0px",i.style.right="0px",i.style.visibility="hidden",i.style.opacity="0",i.onclick=function(){f()},document.querySelector("body").appendChild(i),c(),a.on("activate",function(a){"fullscreen"===a.slide.getAttribute("data-camera")&&(g(),d()),null!==a.slide.getAttribute("data-camera")?g():(h(),setTimeout(e,500))}),a.video={el:i,show:g,hide:h,requestFullscreen:d,exitFullscreen:e,toggleFullScreen:f}};